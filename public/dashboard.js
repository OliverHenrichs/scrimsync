var r=Object.defineProperty;var a=(n,t,e)=>t in n?r(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var s=(n,t,e)=>a(n,typeof t!="symbol"?t+"":t,e);class i{constructor(){s(this,"userInfoElement");s(this,"userAvatarElement");s(this,"guildIdInput");s(this,"checkBotStatusButton");s(this,"botStatusElement");s(this,"resultElement");this.initializeElements(),this.setupEventListeners(),this.loadUserInfo()}initializeElements(){this.userInfoElement=document.getElementById("userInfo"),this.userAvatarElement=document.getElementById("userAvatar"),this.guildIdInput=document.getElementById("guildId"),this.checkBotStatusButton=document.getElementById("checkBotStatus"),this.botStatusElement=document.getElementById("botStatus"),this.resultElement=document.getElementById("result")}setupEventListeners(){this.checkBotStatusButton.addEventListener("click",()=>this.checkBotStatus())}async loadUserInfo(){try{const t=await fetch("/auth/user",{credentials:"include"});if(!t.ok){window.location.href="/auth/login";return}const e=await t.json();this.displayUserInfo(e)}catch(t){console.error("Error loading user info:",t),this.userInfoElement.textContent="Error loading user information"}}displayUserInfo(t){if(this.userInfoElement.innerHTML=`
      <strong>User ID:</strong> ${t.id}<br>
      <strong>Username:</strong> ${t.username}#${t.discriminator}
    `,t.avatar){const e=`https://cdn.discordapp.com/avatars/${t.id}/${t.avatar}.png`;this.userAvatarElement.src=e,this.userAvatarElement.style.display="block"}}async checkBotStatus(){const t=this.guildIdInput.value.trim();if(!t){this.showResult("Please enter a server ID","error");return}this.checkBotStatusButton.disabled=!0,this.botStatusElement.textContent="Checking...",this.botStatusElement.style.background="#ffc107",this.botStatusElement.style.color="#000";try{const o=await(await fetch(`/api/invites/${t}/status`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}})).json();if(o.success&&o.data)o.data.isInGuild?(this.botStatusElement.textContent="✅ Bot is in server",this.botStatusElement.style.background="#28a745",this.botStatusElement.style.color="#fff",this.showResult(`
            <h3>Bot Status: Active</h3>
            <p><strong>Server:</strong> ${o.data.guildName||"Unknown"}</p>
            <p>The bot is successfully connected to this server and ready to use!</p>
          `,"success")):(this.botStatusElement.textContent="❌ Bot not in server",this.botStatusElement.style.background="#dc3545",this.botStatusElement.style.color="#fff",this.showResult(`
            <h3>Bot Status: Not Found</h3>
            <p>The bot is not currently in this server.</p>
            <p><a href="/api/invites/bot-invite">Click here to invite the bot</a></p>
          `,"error"));else throw new Error(o.message||"Failed to check bot status")}catch(e){console.error("Error checking bot status:",e),this.botStatusElement.textContent="❌ Error",this.botStatusElement.style.background="#dc3545",this.botStatusElement.style.color="#fff",this.showResult(`
        <h3>Error</h3>
        <p>Failed to check bot status: ${e instanceof Error?e.message:"Unknown error"}</p>
      `,"error")}finally{this.checkBotStatusButton.disabled=!1}}showResult(t,e){this.resultElement.innerHTML=t,this.resultElement.className=`result ${e}`}}document.addEventListener("DOMContentLoaded",()=>{new i});
